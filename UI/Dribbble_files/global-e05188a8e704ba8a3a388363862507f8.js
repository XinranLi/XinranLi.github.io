function attachPlayerTooltipsToGroupShots(){$("ol.multi-grid li a.zoom").each(function(){var e=$(this);e.tipsy({gravity:"n",html:!0,title:function(){return e.closest("li").find("div.tipsy-player").html()}})})}function showOverlay(e){return $(e).css("height","100%").fadeIn(),!1}function memberContainer(e){var t=$(e).closest("li.player, .profile-container, .shot-byline .attribution, .hover-card .profile-head"),n=$("."+t.attr("class").match(/user-row-\d+/));return n.length?n:t}function initRecentActivity(){$("#t-activity").hover(function(){$("#t-activity .new-activity:visible").fadeOut("slow",function(){var e=$("#t-activity a:first-child").attr("href");$.post(e,{_method:"PUT"})})}).find(".activity-mini a.close").click(function(){$("#nav li ul.tabs").hide()})}function numberWithDelimiter(e){return e.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}!function(e){"use strict";e.picturefill=function(){for(var t=e.document.getElementsByTagName("div"),n=0,i=t.length;i>n;n++)if(null!==t[n].getAttribute("data-picture")){for(var r=t[n].getElementsByTagName("div"),a=[],o=0,s=r.length;s>o;o++){var l=r[o].getAttribute("data-media");(!l||e.matchMedia&&e.matchMedia(l).matches)&&a.push(r[o])}var u=t[n].getElementsByTagName("img")[0];if(a.length){if(!u){var c=t[n].getAttribute("data-class");u=e.document.createElement("img"),u.alt=t[n].getAttribute("data-alt"),c&&(u.className=c),t[n].appendChild(u)}u.src=a.pop().getAttribute("data-src")}else u&&t[n].removeChild(u)}},e.addEventListener?(e.addEventListener("resize",e.picturefill,!1),e.addEventListener("DOMContentLoaded",function(){e.picturefill(),e.removeEventListener("load",e.picturefill,!1)},!1),e.addEventListener("load",e.picturefill,!1)):e.attachEvent&&e.attachEvent("onload",e.picturefill)}(this),window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),i="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===i.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(i){var r,a,o,s,l,u,c,d;if(n.fire(i,"ajax:before")){if(s=i.data("cross-domain"),l=s===t?null:s,u=i.data("with-credentials")||null,c=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),a=i.attr("action"),o=i.serializeArray();var h=i.data("ujs:submit-button");h&&(o.push(h),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",a=i.data("url"),o=i.serialize(),i.data("params")&&(o=o+"&"+i.data("params"))):(r=i.data("method"),a=n.href(i),o=i.data("params")||null);d={type:r||"GET",data:o,dataType:c,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:l},u&&(d.xhrFields={withCredentials:u}),a&&(d.url=a);var f=n.ajax(d);return i.trigger("ajax:send",f),f}return!1},handleMethod:function(i){var r=n.href(i),a=i.data("method"),o=i.attr("target"),s=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),u=e('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';l!==t&&s!==t&&(c+='<input name="'+l+'" value="'+s+'" type="hidden" />'),o&&u.attr("target",o),u.hide().append(c).appendTo("body"),u.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,a,o=e(),s=n||"input,textarea",l=t.find(s);return l.each(function(){if(r=e(this),a=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!a==!i){if(r.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;o=o.add(r)}}),o.length?o:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),a=r.data("method"),o=r.data("params");if(!n.allowAction(r))return n.stopEverything(i);if(r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(!(!i.metaKey&&!i.ctrlKey||a&&"GET"!==a||o))return!0;var s=n.handleRemote(r);return s===!1?n.enableElement(r):s.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r=e(this),a=r.data("remote")!==t,o=n.blankInputs(r,n.requiredInputSelector),s=n.nonBlankInputs(r,n.fileInputSelector);if(!n.allowAction(r))return n.stopEverything(i);if(o&&r.attr("novalidate")==t&&n.fire(r,"ajax:aborted:required",[o]))return n.stopEverything(i);if(a){if(s){setTimeout(function(){n.disableFormElements(r)},13);var l=n.fire(r,"ajax:aborted:file",[s]);return l||setTimeout(function(){n.enableFormElements(r)},13),l}return n.handleRemote(r),!1}setTimeout(function(){n.disableFormElements(r)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),a=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",a)}),i.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)}))}(jQuery),function(e){e.fn.ajaxSubmit=function(t){function n(){function n(){if(!f++){u.detachEvent?u.detachEvent("onload",n):u.removeEventListener("load",n,!1);var t=!0;try{if(p)throw"timeout";var r,o;if(o=u.contentWindow?u.contentWindow.document:u.contentDocument?u.contentDocument:u.document,d.responseText=o.body?o.body.innerHTML:null,d.responseXML=o.XMLDocument?o.XMLDocument:o,d.getResponseHeader=function(e){var t={"content-type":a.dataType};return t[e]},"json"==a.dataType||"script"==a.dataType){var s=o.getElementsByTagName("textarea")[0];d.responseText=s?s.value:d.responseText}else"xml"!=a.dataType||d.responseXML||null==d.responseText||(d.responseXML=i(d.responseText));r=e.httpData(d,a.dataType)}catch(c){t=!1,e.handleError(a,d,"error",c)}t&&(a.success(r,"success"),h&&e.event.trigger("ajaxSuccess",[d,a])),h&&e.event.trigger("ajaxComplete",[d,a]),h&&!--e.active&&e.event.trigger("ajaxStop"),a.complete&&a.complete(d,t?"success":"error"),setTimeout(function(){l.remove(),d.responseXML=null},100)}}function i(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null}var r=s[0],a=e.extend({},e.ajaxSettings,t),o="jqFormIO"+(new Date).getTime(),l=e('<iframe id="'+o+'" name="'+o+'" />'),u=l[0],c=e.browser.opera&&window.opera.version()<9;(e.browser.msie||c)&&(u.src='javascript:false;document.write("");'),l.css({position:"absolute",top:"-1000px",left:"-1000px"});var d={responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}},h=a.global;h&&!e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[d,a]);var f=0,p=0;setTimeout(function(){var i=s.attr("target"),c=s.attr("action");s.attr({target:o,encoding:"multipart/form-data",enctype:"multipart/form-data",method:"POST",action:a.url}),a.timeout&&setTimeout(function(){p=!0,n()},a.timeout);var d=[];try{if(t.extraData)for(var h in t.extraData)d.push(e('<input type="hidden" name="'+h+'" value="'+t.extraData[h]+'" />').appendTo(r)[0]);l.appendTo("body"),u.attachEvent?u.attachEvent("onload",n):u.addEventListener("load",n,!1),r.submit()}finally{s.attr("action",c),i?s.attr("target",i):s.removeAttr("target"),e(d).remove()}},10)}"function"==typeof t&&(t={success:t}),t=e.extend({url:this.attr("action")||window.location.toString(),type:this.attr("method")||"GET"},t||{});var i={};if(this.trigger("form-pre-serialize",[this,t,i]),i.veto)return this;var r=this.formToArray(t.semantic);if(t.data){t.extraData=t.data;for(var a in t.data)r.push({name:a,value:t.data[a]})}if(t.beforeSubmit&&t.beforeSubmit(r,this,t)===!1)return this;if(this.trigger("form-submit-validate",[r,this,t,i]),i.veto)return this;var o=e.param(r);"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+o,t.data=null):t.data=o;var s=this,l=[];if(t.resetForm&&l.push(function(){s.resetForm()}),t.clearForm&&l.push(function(){s.clearForm()}),!t.dataType&&t.target){var u=t.success||function(){};l.push(function(n){e(t.target).html(n).each(u,arguments)})}else t.success&&l.push(t.success);t.success=function(e,t){for(var n=0,i=l.length;i>n;n++)l[n](e,t,s)};for(var c=e("input:file",this).fieldValue(),d=!1,h=0;h<c.length;h++)c[h]&&(d=!0);return t.iframe||d?e.browser.safari&&t.closeKeepAlive?e.get(t.closeKeepAlive,n):n():e.ajax(t),this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(t){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){return e(this).ajaxSubmit(t),!1}).each(function(){e(":submit,input:image",this).bind("click.form-plugin",function(t){var n=this.form;if(n.clk=this,"image"==this.type)if(void 0!=t.offsetX)n.clk_x=t.offsetX,n.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var i=e(this).offset();n.clk_x=t.pageX-i.left,n.clk_y=t.pageY-i.top}else n.clk_x=t.pageX-this.offsetLeft,n.clk_y=t.pageY-this.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},10)})})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin"),this.each(function(){e(":submit,input:image",this).unbind("click.form-plugin")})},e.fn.formToArray=function(t){var n=[];if(0==this.length)return n;var i=this[0],r=t?i.getElementsByTagName("*"):i.elements;if(!r)return n;for(var a=0,o=r.length;o>a;a++){var s=r[a],l=s.name;if(l)if(t&&i.clk&&"image"==s.type)s.disabled||i.clk!=s||n.push({name:l+".x",value:i.clk_x},{name:l+".y",value:i.clk_y});else{var u=e.fieldValue(s,!0);if(u&&u.constructor==Array)for(var c=0,d=u.length;d>c;c++)n.push({name:l,value:u[c]});else null!==u&&"undefined"!=typeof u&&n.push({name:l,value:u})}}if(!t&&i.clk)for(var h=i.getElementsByTagName("input"),a=0,o=h.length;o>a;a++){var f=h[a],l=f.name;l&&!f.disabled&&"image"==f.type&&i.clk==f&&n.push({name:l+".x",value:i.clk_x},{name:l+".y",value:i.clk_y})}return n},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var i=this.name;if(i){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var a=0,o=r.length;o>a;a++)n.push({name:i,value:r[a]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,r=this.length;r>i;i++){var a=this[i],o=e.fieldValue(a,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(n,o):n.push(o))}return n},e.fieldValue=function(t,n){var i=t.name,r=t.type,a=t.tagName.toLowerCase();if("undefined"==typeof n&&(n=!0),n&&(!i||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==a&&-1==t.selectedIndex))return null;if("select"==a){var o=t.selectedIndex;if(0>o)return null;for(var s=[],l=t.options,u="select-one"==r,c=u?o+1:l.length,d=u?o:0;c>d;d++){var h=l[d];if(h.selected){var f=e.browser.msie&&!h.attributes.value.specified?h.text:h.value;if(u)return f;s.push(f)}}return s}return t.value},e.fn.clearForm=function(){return this.each(function(){e("input,select,textarea",this).clearFields()})},e.fn.clearFields=e.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0==e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.select=function(t){return void 0==t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").select(!1),this.selected=t}})}}(jQuery),function(e){function t(e,t){return"function"==typeof e?e.call(t):e}function n(e){for(;e=e.parentNode;)if(e==document)return!0;return!1}function i(t,n){this.$element=e(t),this.options=n,this.enabled=!0,this.fixTitle()}i.prototype={show:function(){var n=this.getTitle();if(n&&this.enabled){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](n),i[0].className="tipsy",i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var r,a=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),o=i[0].offsetWidth,s=i[0].offsetHeight,l=t(this.options.gravity,this.$element[0]);switch(l.charAt(0)){case"n":r={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-o/2};break;case"s":r={top:a.top-s-this.options.offset,left:a.left+a.width/2-o/2};break;case"e":r={top:a.top+a.height/2-s/2,left:a.left-o-this.options.offset};break;case"w":r={top:a.top+a.height/2-s/2,left:a.left+a.width+this.options.offset}}2==l.length&&(r.left="w"==l.charAt(1)?a.left+a.width/2-15:a.left+a.width/2-o+15),i.css(r).addClass("tipsy-"+l),i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+l.charAt(0),this.options.className&&i.addClass(t(this.options.className,this.$element[0])),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){e(this).remove()}):this.tip().remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("original-title"))&&e.attr("original-title",e.attr("title")||"").removeAttr("title")},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;return"string"==typeof n.title?e=t.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(e=n.title.call(t[0])),e=(""+e).replace(/(^\s*|\s*$)/,""),e||n.fallback},tip:function(){return this.$tip||(this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},e.fn.tipsy=function(t){function n(n){var r=e.data(n,"tipsy");return r||(r=new i(n,e.fn.tipsy.elementOptions(n,t)),e.data(n,"tipsy",r)),r}function r(){var e=n(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))}function a(){var e=n(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"==e.hoverState&&e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if("string"==typeof t){var o=this.data("tipsy");return o&&o[t](),this}if(t=e.extend({},e.fn.tipsy.defaults,t),t.live||this.each(function(){n(this)}),"manual"!=t.trigger){var s=t.live?"live":"bind",l="hover"==t.trigger?"mouseenter":"focus",u="hover"==t.trigger?"mouseleave":"blur";this[s](l,r)[s](u,a)}return this},e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");t&&n(t)||e(this).remove()})},e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n},e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"},e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"},e.fn.tipsy.autoBounds=function(t,n){return function(){var i={ns:n[0],ew:n.length>1?n[1]:!1},r=e(document).scrollTop()+t,a=e(document).scrollLeft()+t,o=e(this);return o.offset().top<r&&(i.ns="n"),o.offset().left<a&&(i.ew="w"),e(window).width()+e(document).scrollLeft()-o.offset().left<t&&(i.ew="e"),e(window).height()+e(document).scrollTop()-o.offset().top<t&&(i.ns="s"),i.ns+(i.ew?i.ew:"")}}}(jQuery),function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(t){return!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=c),void 0!==t.click&&void 0===t.tap&&(t.tap=t.click),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each(function(){var i=e(this),r=i.data(D);r||(r=new n(this,t),i.data(D,r))})}function n(t,n){function i(t){if(!(ut()||e(t.target).closest(n.excludedElements,qt).length>0)){var i,r=t.originalEvent?t.originalEvent:t,a=r.touches,o=a?a[0]:r;return Vt=S,a?Kt=a.length:t.preventDefault(),Mt=0,Pt=null,Nt=null,Bt=0,Ut=0,_t=0,Ft=1,Rt=0,Qt=pt(),zt=vt(),st(),!a||Kt===n.fingers||n.fingers===y||z()?(dt(0,o),Xt=Et(),2==Kt&&(dt(1,a[1]),Ut=_t=wt(Qt[0].start,Qt[1].start)),(n.swipeStatus||n.pinchStatus)&&(i=M(r,Vt))):i=!1,i===!1?(Vt=k,M(r,Vt),i):(n.hold&&(en=setTimeout(e.proxy(function(){qt.trigger("hold",[r.target]),n.hold&&(i=n.hold.call(qt,r,r.target))},this),n.longTapThreshold)),ct(!0),null)}}function C(e){var t=e.originalEvent?e.originalEvent:e;if(Vt!==x&&Vt!==k&&!lt()){var i,r=t.touches,a=r?r[0]:t,o=ht(a);if(Wt=Et(),r&&(Kt=r.length),n.hold&&clearTimeout(en),Vt=T,2==Kt&&(0==Ut?(dt(1,r[1]),Ut=_t=wt(Qt[0].start,Qt[1].start)):(ht(r[1]),_t=wt(Qt[0].end,Qt[1].end),Nt=Tt(Qt[0].end,Qt[1].end)),Ft=St(Ut,_t),Rt=Math.abs(Ut-_t)),Kt===n.fingers||n.fingers===y||!r||z()){if(Pt=It(o.start,o.end),R(e,Pt),Mt=xt(o.start,o.end),Bt=yt(),gt(Pt,Mt),(n.swipeStatus||n.pinchStatus)&&(i=M(t,Vt)),!n.triggerOnTouchEnd||n.triggerOnTouchLeave){var s=!0;if(n.triggerOnTouchLeave){var l=$t(this);s=Dt(o.end,l)}!n.triggerOnTouchEnd&&s?Vt=O(T):n.triggerOnTouchLeave&&!s&&(Vt=O(x)),(Vt==k||Vt==x)&&M(t,Vt)}}else Vt=k,M(t,Vt);i===!1&&(Vt=k,M(t,Vt))}}function A(e){var t=e.originalEvent?e.originalEvent:e,i=t.touches;return i&&i.length?(ot(),!0):(lt()&&(Kt=Yt),Wt=Et(),Bt=yt(),U()||!B()?(Vt=k,M(t,Vt)):n.triggerOnTouchEnd||0==n.triggerOnTouchEnd&&Vt===T?(e.preventDefault(),Vt=x,M(t,Vt)):!n.triggerOnTouchEnd&&G()?(Vt=x,P(t,Vt,p)):Vt===T&&(Vt=k,M(t,Vt)),ct(!1),null)}function H(){Kt=0,Wt=0,Xt=0,Ut=0,_t=0,Ft=1,st(),ct(!1)}function L(e){var t=e.originalEvent?e.originalEvent:e;n.triggerOnTouchLeave&&(Vt=O(x),M(t,Vt))}function j(){qt.unbind(At,i),qt.unbind(Ot,H),qt.unbind(Ht,C),qt.unbind(Lt,A),jt&&qt.unbind(jt,L),ct(!1)}function O(e){var t=e,i=F(),r=B(),a=U();return!i||a?t=k:!r||e!=T||n.triggerOnTouchEnd&&!n.triggerOnTouchLeave?!r&&e==x&&n.triggerOnTouchLeave&&(t=k):t=x,t}function M(e,t){var n,i=e.touches;return Q()||K()||q()||z()?((Q()||K())&&(n=P(e,t,h)),(q()||z())&&n!==!1&&(n=P(e,t,f))):rt()&&n!==!1?n=P(e,t,g):at()&&n!==!1?n=P(e,t,m):it()&&n!==!1&&(n=P(e,t,p)),t===k&&H(e),t===x&&(i?i.length||H(e):H(e)),n}function P(t,i,c){var d;if(c==h){if(qt.trigger("swipeStatus",[i,Pt||null,Mt||0,Bt||0,Kt,Qt]),n.swipeStatus&&(d=n.swipeStatus.call(qt,t,i,Pt||null,Mt||0,Bt||0,Kt,Qt),d===!1))return!1;if(i==x&&V()){if(qt.trigger("swipe",[Pt,Mt,Bt,Kt,Qt]),n.swipe&&(d=n.swipe.call(qt,t,Pt,Mt,Bt,Kt,Qt),d===!1))return!1;switch(Pt){case r:qt.trigger("swipeLeft",[Pt,Mt,Bt,Kt,Qt]),n.swipeLeft&&(d=n.swipeLeft.call(qt,t,Pt,Mt,Bt,Kt,Qt));break;case a:qt.trigger("swipeRight",[Pt,Mt,Bt,Kt,Qt]),n.swipeRight&&(d=n.swipeRight.call(qt,t,Pt,Mt,Bt,Kt,Qt));break;case o:qt.trigger("swipeUp",[Pt,Mt,Bt,Kt,Qt]),n.swipeUp&&(d=n.swipeUp.call(qt,t,Pt,Mt,Bt,Kt,Qt));break;case s:qt.trigger("swipeDown",[Pt,Mt,Bt,Kt,Qt]),n.swipeDown&&(d=n.swipeDown.call(qt,t,Pt,Mt,Bt,Kt,Qt))}}}if(c==f){if(qt.trigger("pinchStatus",[i,Nt||null,Rt||0,Bt||0,Kt,Ft,Qt]),n.pinchStatus&&(d=n.pinchStatus.call(qt,t,i,Nt||null,Rt||0,Bt||0,Kt,Ft,Qt),d===!1))return!1;if(i==x&&N())switch(Nt){case l:qt.trigger("pinchIn",[Nt||null,Rt||0,Bt||0,Kt,Ft,Qt]),n.pinchIn&&(d=n.pinchIn.call(qt,t,Nt||null,Rt||0,Bt||0,Kt,Ft,Qt));break;case u:qt.trigger("pinchOut",[Nt||null,Rt||0,Bt||0,Kt,Ft,Qt]),n.pinchOut&&(d=n.pinchOut.call(qt,t,Nt||null,Rt||0,Bt||0,Kt,Ft,Qt))}}return c==p?(i===k||i===x)&&(clearTimeout(Zt),clearTimeout(en),Y()&&!et()?(Jt=Et(),Zt=setTimeout(e.proxy(function(){Jt=null,qt.trigger("tap",[t.target]),n.tap&&(d=n.tap.call(qt,t,t.target))},this),n.doubleTapThreshold)):(Jt=null,qt.trigger("tap",[t.target]),n.tap&&(d=n.tap.call(qt,t,t.target)))):c==g?(i===k||i===x)&&(clearTimeout(Zt),Jt=null,qt.trigger("doubletap",[t.target]),n.doubleTap&&(d=n.doubleTap.call(qt,t,t.target))):c==m&&(i===k||i===x)&&(clearTimeout(Zt),Jt=null,qt.trigger("longtap",[t.target]),n.longTap&&(d=n.longTap.call(qt,t,t.target))),d}function B(){var e=!0;return null!==n.threshold&&(e=Mt>=n.threshold),e}function U(){var e=!1;return null!==n.cancelThreshold&&null!==Pt&&(e=mt(Pt)-Mt>=n.cancelThreshold),e}function _(){return null!==n.pinchThreshold?Rt>=n.pinchThreshold:!0}function F(){var e;return e=n.maxTimeThreshold&&Bt>=n.maxTimeThreshold?!1:!0}function R(e,t){if(n.preventDefaultEvents!==!1)if(n.allowPageScroll===c)e.preventDefault();else{var i=n.allowPageScroll===d;switch(t){case r:(n.swipeLeft&&i||!i&&n.allowPageScroll!=v)&&e.preventDefault();break;case a:(n.swipeRight&&i||!i&&n.allowPageScroll!=v)&&e.preventDefault();break;case o:(n.swipeUp&&i||!i&&n.allowPageScroll!=b)&&e.preventDefault();break;case s:(n.swipeDown&&i||!i&&n.allowPageScroll!=b)&&e.preventDefault()}}}function N(){var e=X(),t=W(),n=_();return e&&t&&n}function z(){return!!(n.pinchStatus||n.pinchIn||n.pinchOut)}function q(){return!(!N()||!z())}function V(){var e=F(),t=B(),n=X(),i=W(),r=U(),a=!r&&i&&n&&t&&e;return a}function K(){return!!(n.swipe||n.swipeStatus||n.swipeLeft||n.swipeRight||n.swipeUp||n.swipeDown)}function Q(){return!(!V()||!K())}function X(){return Kt===n.fingers||n.fingers===y||!I}function W(){return 0!==Qt[0].end.x}function G(){return!!n.tap}function Y(){return!!n.doubleTap}function J(){return!!n.longTap}function Z(){if(null==Jt)return!1;var e=Et();return Y()&&e-Jt<=n.doubleTapThreshold}function et(){return Z()}function tt(){return(1===Kt||!I)&&(isNaN(Mt)||Mt<n.threshold)}function nt(){return Bt>n.longTapThreshold&&w>Mt}function it(){return!(!tt()||!G())}function rt(){return!(!Z()||!Y())}function at(){return!(!nt()||!J())}function ot(){Gt=Et(),Yt=event.touches.length+1}function st(){Gt=0,Yt=0}function lt(){var e=!1;if(Gt){var t=Et()-Gt;t<=n.fingerReleaseThreshold&&(e=!0)}return e}function ut(){return!(qt.data(D+"_intouch")!==!0)}function ct(e){e===!0?(qt.bind(Ht,C),qt.bind(Lt,A),jt&&qt.bind(jt,L)):(qt.unbind(Ht,C,!1),qt.unbind(Lt,A,!1),jt&&qt.unbind(jt,L,!1)),qt.data(D+"_intouch",e===!0)}function dt(e,t){var n=void 0!==t.identifier?t.identifier:0;return Qt[e].identifier=n,Qt[e].start.x=Qt[e].end.x=t.pageX||t.clientX,Qt[e].start.y=Qt[e].end.y=t.pageY||t.clientY,Qt[e]}function ht(e){var t=void 0!==e.identifier?e.identifier:0,n=ft(t);return n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function ft(e){for(var t=0;t<Qt.length;t++)if(Qt[t].identifier==e)return Qt[t]}function pt(){for(var e=[],t=0;5>=t;t++)e.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return e}function gt(e,t){t=Math.max(t,mt(e)),zt[e].distance=t}function mt(e){return zt[e]?zt[e].distance:void 0}function vt(){var e={};return e[r]=bt(r),e[a]=bt(a),e[o]=bt(o),e[s]=bt(s),e}function bt(e){return{direction:e,distance:0}}function yt(){return Wt-Xt}function wt(e,t){var n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+i*i))}function St(e,t){var n=t/e*1;return n.toFixed(2)}function Tt(){return 1>Ft?u:l}function xt(e,t){return Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)))}function kt(e,t){var n=e.x-t.x,i=t.y-e.y,r=Math.atan2(i,n),a=Math.round(180*r/Math.PI);return 0>a&&(a=360-Math.abs(a)),a}function It(e,t){var n=kt(e,t);return 45>=n&&n>=0?r:360>=n&&n>=315?r:n>=135&&225>=n?a:n>45&&135>n?s:o}function Et(){var e=new Date;return e.getTime()}function $t(t){t=e(t);var n=t.offset(),i={left:n.left,right:n.left+t.outerWidth(),top:n.top,bottom:n.top+t.outerHeight()};return i}function Dt(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}var Ct=I||$||!n.fallbackToMouseEvents,At=Ct?$?E?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ht=Ct?$?E?"MSPointerMove":"pointermove":"touchmove":"mousemove",Lt=Ct?$?E?"MSPointerUp":"pointerup":"touchend":"mouseup",jt=Ct?null:"mouseleave",Ot=$?E?"MSPointerCancel":"pointercancel":"touchcancel",Mt=0,Pt=null,Bt=0,Ut=0,_t=0,Ft=1,Rt=0,Nt=0,zt=null,qt=e(t),Vt="start",Kt=0,Qt=null,Xt=0,Wt=0,Gt=0,Yt=0,Jt=0,Zt=null,en=null;try{qt.bind(At,i),qt.bind(Ot,H)}catch(tn){e.error("events not supported "+At+","+Ot+" on jQuery.swipe")}this.enable=function(){return qt.bind(At,i),qt.bind(Ot,H),qt},this.disable=function(){return j(),qt},this.destroy=function(){j(),qt.data(D,null),qt=null},this.option=function(t,i){if(void 0!==n[t]){if(void 0===i)return n[t];n[t]=i}else e.error("Option "+t+" does not exist on jQuery.swipe.options");return null}}var i="1.6.9",r="left",a="right",o="up",s="down",l="in",u="out",c="none",d="auto",h="swipe",f="pinch",p="tap",g="doubletap",m="longtap",v="horizontal",b="vertical",y="all",w=10,S="start",T="move",x="end",k="cancel",I="ontouchstart"in window,E=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,$=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,D="TouchSwipe",C={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};e.fn.swipe=function(n){var i=e(this),r=i.data(D);if(r&&"string"==typeof n){if(r[n])return r[n].apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+n+" does not exist on jQuery.swipe")}else if(!(r||"object"!=typeof n&&n))return t.apply(this,arguments);return i},e.fn.swipe.version=i,e.fn.swipe.defaults=C,e.fn.swipe.phases={PHASE_START:S,PHASE_MOVE:T,PHASE_END:x,PHASE_CANCEL:k},e.fn.swipe.directions={LEFT:r,RIGHT:a,UP:o,DOWN:s,IN:l,OUT:u},e.fn.swipe.pageScroll={NONE:c,HORIZONTAL:v,VERTICAL:b,AUTO:d},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:y}}),function(e,t){"use strict";var n=e.History=e.History||{},i=e.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){i(e).bind(t,n)},trigger:function(e,t,n){i(e).trigger(t,n)},extractEventData:function(e,n,i){var r=n&&n.originalEvent&&n.originalEvent[e]||i&&i[e]||t;return r},onDomLoad:function(e){i(e)}},"undefined"!=typeof n.init&&n.init()}(window),function(e,t){"use strict";var n=e.console||t,i=e.document,r=e.navigator,a=!1,o=e.setTimeout,s=e.clearTimeout,l=e.setInterval,u=e.clearInterval,c=e.JSON,d=e.alert,h=e.History=e.History||{},f=e.history;try{a=e.sessionStorage,a.setItem("TEST","1"),a.removeItem("TEST")}catch(p){a=!1}if(c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode,"undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"==typeof h.Adapter?!1:("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||i.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if("undefined"!=typeof t&&null!==t){for(e=0;e<t.length;e++)u(t[e]);h.intervalList=null}},h.debug=function(){(h.options.debug||!1)&&h.log.apply(h,arguments)},h.log=function(){var e,t,r,a,o,s="undefined"!=typeof n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,l=i.getElementById("log");for(s?(a=Array.prototype.slice.call(arguments),e=a.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[e,a]):n.log.apply(n,[e,a])):e="\n"+arguments[0]+"\n",t=1,r=arguments.length;r>t;++t){if(o=arguments[t],"object"==typeof o&&"undefined"!=typeof c)try{o=c.stringify(o)}catch(u){}e+="\n"+o+"\n"
}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||d(e),!0},h.getInternetExplorerMajorVersion=function(){var e=h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->")&&n[0];);return e>4?e:!1}();return e},h.isInternetExplorer=function(){var e=h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return e},h.emulated=h.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=c.stringify(e),n=c.parse(t)):n={},n},h.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},h.getBaseHref=function(){var e=i.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},h.getBaseUrl=function(){var e=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return e},h.getPageUrl=function(){var e,t=h.getState(!1,!1),n=(t||{}).url||h.getLocationHref();return e=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(e){return/\./.test(e)?e:e+"/"})},h.getBasePageUrl=function(){var e=h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/";return e},h.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t="undefined"==typeof t?!0:t,/[a-z]+\:\/\//.test(e)||(n="/"===i?h.getRootUrl()+e.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+e:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.getLocationHref=function(e){return e=e||i,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){"undefined"==typeof e&&(e=!0),"undefined"==typeof t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&(n=h.cloneObject(n),n.url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t,n=h.extractId(e.url);if(!n)if(t=h.getStateString(e),"undefined"!=typeof h.stateToId[t])n=h.stateToId[t];else if("undefined"!=typeof h.store.stateToId[t])n=h.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof h.idToState[n]||"undefined"!=typeof h.store.idToState[n];);h.stateToId[t]=n,h.idToState[n]=e}return n},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),"undefined"!=typeof e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&h.options.disableSuid!==!0&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=h.normalizeState(i)},h.getStateById=function(e){e=String(e);var n=h.idToState[e]||h.store.idToState[e]||t;return n},h.getStateString=function(e){var t,n,i;return t=h.normalizeState(e),n={data:t.data,title:e.title,url:e.url},i=c.stringify(n)},h.getStateId=function(e){var t,n;return t=h.normalizeState(e),n=t.id},h.getHashByState=function(e){var t,n;return t=h.normalizeState(e),n=t.hash},h.extractId=function(e){var t,n,i,r;return r=-1!=e.indexOf("#")?e.split("#")[0]:e,n=/(.*)\&_suid=([0-9]+)$/.exec(r),i=n?n[1]||e:e,t=n?String(n[2]||""):"",t||!1},h.isTraditionalAnchor=function(e){var t=!/[\/\?\.]/.test(e);return t},h.extractState=function(e,t){var n,i,r=null;return t=t||!1,n=h.extractId(e),n&&(r=h.getStateById(n)),r||(i=h.getFullUrl(e),n=h.getIdByUrl(i)||!1,n&&(r=h.getStateById(n)),!r&&t&&!h.isTraditionalAnchor(e)&&(r=h.createStateObject(null,null,i))),r},h.getIdByUrl=function(e){var n=h.urlToId[e]||h.store.urlToId[e]||t;return n},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||t},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||t},h.hasUrlDuplicate=function(e){var t,n=!1;return t=h.extractState(e.url),n=t&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t,n,i,r=!1;return h.savedStates.length&&(t=e.id,n=h.getLastSavedState(),i=n.id,r=t===i),r},h.saveState=function(e){return h.isLastSavedState(e)?!1:(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){var t=null;return t="undefined"==typeof e?h.savedStates[h.savedStates.length-1]:0>e?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){var e=null;return e=h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t,n=h.getLocationHref(e);return t=h.getHashByUrl(n)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=decodeURIComponent(t)},h.normalizeHash=function(e){var t=e.replace(/[^#]*#/,"").replace(/#.*/,"");return t},h.setHash=function(e,t){var n,r;return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),n=h.extractState(e,!0),n&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(r=h.getPageUrl(),h.pushState(null,null,r+"#"+e,!1)):i.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,n=e.title;n||(t=h.getStateByIndex(0),t&&t.url===e.url&&(n=t.title||h.options.initialTitle));try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(r){}return i.title=n,h},h.queues=[],h.busy=function(e){if("undefined"!=typeof e?h.busy.flag=e:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){s(h.busy.timeout);var t=function(){var e,n,i;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)n=h.queues[e],0!==n.length&&(i=n.shift(),h.fireQueueItem(i),h.busy.timeout=o(t,h.options.busyDelay))};h.busy.timeout=o(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),"undefined"!=typeof t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(s(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=o(function(){return h.doubleCheckClear(),h.stateChanged||e(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t,n=h.extractState(h.getLocationHref());return h.isLastSavedState(n)?void 0:(t=n,t||(t=h.createStateObject()),h.Adapter.trigger(e,"popstate"),h)},h.back=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),f.go(-1),!0)},h.forward=function(e){return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),f.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;e>=n;++n)h.forward(t);else{if(!(0>e))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var p=function(){};h.pushState=h.pushState||p,h.replaceState=h.replaceState||p}else h.onPopState=function(t,n){var i,r,a=!1,o=!1;return h.doubleCheckComplete(),i=h.getHash(),i?(r=h.extractState(i||h.getLocationHref(),!0),r?h.replaceState(r.data,r.title,r.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):(a=h.Adapter.extractEventData("state",t,n)||!1,o=a?h.getStateById(a):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()),o||(o=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(o)?(h.busy(!1),!1):(h.storeState(o),h.saveState(o),h.setTitle(o),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,i,r){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:r}),!1;h.busy(!0);var a=h.createStateObject(t,n,i);return h.isLastSavedState(a)?h.busy(!1):(h.storeState(a),h.expectedStateId=a.id,f.pushState(a.id,a.title,a.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,i,r){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:r}),!1;h.busy(!0);var a=h.createStateObject(t,n,i);return h.isLastSavedState(a)?h.busy(!1):(h.storeState(a),h.expectedStateId=a.id,f.replaceState(a.id,a.title,a.url),h.Adapter.trigger(e,"popstate")),!0};if(a){try{h.store=c.parse(a.getItem("History.store"))||{}}catch(g){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),a&&(h.onUnload=function(){var e,t,n;try{e=c.parse(a.getItem("History.store"))||{}}catch(i){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),n=c.stringify(e);try{a.setItem("History.store",n)}catch(r){if(r.code!==DOMException.QUOTA_EXCEEDED_ERR)throw r;a.length&&(a.removeItem("History.store"),a.setItem("History.store",n))}},h.intervalList.push(l(h.onUnload,h.options.storeInterval)),h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(l(h.safariStatePoll,h.options.safariPollInterval)),("Apple Computer, Inc."===r.vendor||"Mozilla"===(r.appCodeName||""))&&(h.Adapter.bind(e,"hashchange",function(){h.Adapter.trigger(e,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(e,"hashchange")})))},(!h.options||!h.options.delayInit)&&h.init()}(window);var Dribbble=Dribbble||{};DEVICE_WIDTH_BREAKPOINT="800px",HIDPI_BREAKPOINT="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-device-pixel-ratio: 1.5),(min-resolution: 1.5dppx)";var tipsyOptions={fade:!1,opacity:.95,className:function(){return this.getAttribute("data-tipsy-class")},gravity:function(){var e=100,t=$(this).offset(),n=t.left,i=t.top;return e>n?"sw":n>$(window).width()-e?e>i?"ne":"se":e>i?"n":"s"}};$(document).ajaxSend(function(e,t){var n=$('meta[name="csrf-token"]').attr("content");t.setRequestHeader("X-CSRF-Token",n)}),$("a[href=#]").click(function(e){e.preventDefault()}),User={loggedIn:function(){return $("body.logged-in").length>0},loggedOut:function(){return!this.loggedIn()},isPro:function(){return $("body.pro").length>0},isTeam:function(){return $("body.team").length>0}},initRecentActivity(),$(function(){$("[placeholder]").focus(function(){var e=$(this);e.val()==e.attr("placeholder")&&(e.val(""),e.removeClass("placeholder"))}).blur(function(){var e=$(this);(""==e.val()||e.val()==e.attr("placeholder"))&&(e.addClass("placeholder"),e.val(e.attr("placeholder")))}).blur(),$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var e=$(this);e.val()==e.attr("placeholder")&&e.val("")})})}),$("#toggle-nav").click(function(){return $("#nav").toggleClass("nav-open"),$("body").toggleClass("scroll"),$("html, body").scrollTop(0),!1}),$("#t-more > a, #t-profile > a").click(function(e){var t=$(this).parent();$("ul#nav").hasClass("nav-open")&&(e.preventDefault(),$(this).toggleClass("back-link"),$("#nav > li:not(#t-activity,#t-upld)").toggle(),t.toggle().toggleClass("nav-expanded"),$("html, body").scrollTop(0))}),$(".subscribe-to-notification").on("ajax:success","a[data-method]",function(e,t){$(e.target).closest(".subscribe-to-notification").html(t)}),jQuery.fn.showAndHide=function(e){return $(e).hide(),this.show()},jQuery.fn.modelId=function(){var e=$(this).attr("id");if(null==e)return null;var t=e.split(/[-_]/g);return t.length>1?t[t.length-1]:null},Notify={success:function(e){Notify.notify("success",e)},warning:function(e){Notify.notify("warning",e)},error:function(e){Notify.notify("error",e)},alert:function(e,t){var t=t||{},n=$(".notice-alert"),i=Math.max(0,$("#header").height()-$(document).scrollTop()),r=function(){n.fadeOut(500,function(){n.find("a.close").show()})};if($(document).keyup(function(e){27==e.which&&r()}),n.css({top:i+"px"}).find("h3").html(e).end().find("a.close").click(function(){r()}).end().show(),t.timeout){n.find("a.close").hide();var a=t.timeout;a="number"==typeof a?a:3e3,setTimeout(r,a)}},clear:function(){$(".notice").hide().removeClass("success warning error").find("h2").text("")},notify:function(e,t){Notify.clear(),$(".ajax.notice").find("h2").html(t).end().find("a.close").click(Notify.clear).end().addClass(e).show()},scrollTo:function(){$("html, body").scrollTop($(".notice").offset().top)}},$.fn.clank=function(e){if(null!=e){var t=$(this).closest("form");t.find(".errorExplanation").remove(),t.find("fieldset").removeClass("fieldWithErrors"),e='<div class="errorExplanation" id="errorExplanation"><h2>Clank!</h2><ul><li>'+e+"</li></ul></div>",t.prepend(e),t.find("fieldset").addClass("fieldWithErrors")}},ShowAndHideControl=function(e){var t=$(e.target),n=$(e.showControl),i=$(e.hideControl);n.click(function(){return t.showAndHide(n),!1}),i.click(function(){return t.hide(),n.show(),!1})},$.fn.fadeable=function(e){var t={target:this,duration:"fast"};$.extend(t,e),$(this).live("hover",function(e){switch(e.type){case"mouseenter":$(this).find(t.target).stop().fadeTo(t.duration,1);break;case"mouseleave":$(this).find(t.target).stop().fadeTo(t.duration,0)}})},$.fn.selectMenu=function(){$(this).change(function(e){location.href=$(this).find(":selected").val(),e.preventDefault()})},ResultsPane=function(e){$paneContainer=$(e||"#main");var t=$paneContainer.find(".results-pane"),n=$paneContainer.find("div.processing");return{waiting:function(){n.show(),t.css("opacity",.2)},finished:function(){n.hide(),t.css("opacity",1)},noResults:function(e){e=e||"None",t.html('<div class="null-message"><h2>'+e+"</h2></div>")}}},$("ol.prevnext li a").fadeable({target:"strong"}),$("ol.activity li div.act-shot").fadeable({target:"strong"}),$("ol.multi-grid li a").fadeable({target:"strong"});var Overlay={init:function(){var e=$("#overlay");e.find(".close").live("click",Overlay.hide),e.find("form .cancel").live("click",Overlay.hide),e.live("click",function(e){$(e.target).is("#overlay")&&Overlay.hide()})},show:function(){var e=$("#overlay");return e.css("height",document.body.clientHeight+"px"),e.fadeIn(),!1},hide:function(){var e=$("#overlay");return e.fadeOut(function(){e.find(".display").html('<div class="processing">Loading ...</div>')}),!1}};$("#t-search").click(function(){return $("#dashboard").slideToggle("normal"),!1}),$("[rel*=tipsy]").tipsy(tipsyOptions),$(document).ajaxSuccess(function(){$("[rel*=tipsy]").tipsy(tipsyOptions)}),$("a[data-hover]").hover(function(){var e=$(this);e.attr("data-hover-out",e.text()).text(e.attr("data-hover"))},function(){var e=$(this);e.text(e.attr("data-hover-out")),e.removeAttr("data-hover-out")});var showActionMenu=function(e){Dribbble.HoverCards&&Dribbble.HoverCards.dismiss(),$(e.target).closest(".member-actions").addClass("active").find(".actions-on-user").show()},hideActionMenu=function(e){$(e.target).closest(".member-actions").removeClass("active").find(".actions-on-user").hide()},toggleActionMenu=function(e){$(e.target).closest(".member-actions").hasClass("active")?hideActionMenu(e):showActionMenu(e)};$("body").on({mouseenter:showActionMenu,mouseleave:hideActionMenu},".member-actions"),$(".action.grid").on("touchstart",toggleActionMenu),$(".actions-on-user li a").click(function(){$(this).closest(".member-actions").removeClass("active").find(".actions-on-user").hide()}),$("a.block").live("click",function(e){var t=this;$.post(t.href,function(){memberContainer(t).addClass("blocked-by-current-user").removeClass("followed-by-current-user listed-by-current-user")}),e.preventDefault()}),$("a.unblock").live("click",function(e){var t=this;$.ajax(t.href,{type:"DELETE",success:function(){memberContainer(t).removeClass("blocked-by-current-user")}}),e.preventDefault()}),$(".actions-on-user").find(".remove-from-team a").live("click",function(e){if(!confirm("Remove this member from the team?"))return!1;var t=this;$.ajax(t.href,{type:"DELETE",success:function(e){e.error?Notify.error(e.error):Notify.alert(e.success)}}),e.preventDefault()}).end().find(".leave-team a").live("click",function(e){if(!confirm("You are about to leave this team. Continue?"))return!1;var t=this;$.ajax(t.href,{type:"DELETE",success:function(e){e.error?Notify.error(e.error):Notify.alert(e.success)}}),e.preventDefault()}).end(),window.matchMedia("screen and (min-width: "+DEVICE_WIDTH_BREAKPOINT+")").matches||$("#main .tabs > li.has-dd > a, div.full-tabs ul.full-tabs-links > li.more > a").click(function(){var e=$(this).parent();return e.hasClass("hover")?e.removeClass("hover"):($("#main .tabs > li.hover, div.full-tabs ul.full-tabs-links > li.hover").removeClass("hover"),e.addClass("hover")),!1}),Dribbble.isHistorySupported=function(){return window.history&&"pushState"in window.history},Dribbble.isMobile=function(){return window.matchMedia("(max-width: 959px)").matches?!0:Dribbble.isMobileSafari()?!0:!1},Dribbble.isMobileSafari=function(){return navigator.userAgent.match(/(iPad|iPhone|iPod touch)/)?!0:!1},Dribbble.FollowButton=function(e,t){return t=t||function(){return null},{initialize:function(){this.bindEventListeners()},bindEventListeners:function(){e.on("click",".follow-prompt a.follow",this.follow.bind(this)),e.on("click",".follow-prompt a.unfollow",this.unfollow.bind(this))},follow:function(e){var t=$(e.currentTarget),n=memberContainer(t);return n.hasClass("blocking-current-user")?(Notify.alert("You have been blocked from following this account at the request of the member."),!1):($.ajax(t.attr("href"),{type:"POST",beforeSend:function(){t.addClass("processing")}}).done(function(){n.addClass("followed-by-current-user"),this.modifyFollowerCount(1,n)}.bind(this)).fail(function(e){Notify.alert(e.responseText)}).always(function(){t.removeClass("processing")}),!1)},unfollow:function(e){var t=$(e.currentTarget),n=memberContainer(t);return $.ajax(t.attr("href"),{type:"DELETE",beforeSend:function(){t.addClass("processing")}}).done(function(){n.removeClass("followed-by-current-user"),this.modifyFollowerCount(-1,n)}.bind(this)).always(function(){t.removeClass("processing")}),!1},modifyFollowerCount:function(e,n){var i=t(n);if(i&&1==i.length){var r=i.find(".meta"),a=i.find(".count"),o=parseInt(a.text().replace(",",""),10)+e;a.text(numberWithDelimiter(o)),r.text(1==o?"Follower":"Followers")}}}},new Dribbble.FollowButton($("#wrap")).initialize(),new Dribbble.FollowButton($(".profile-dash-actions"),function(){return $(".full-tabs .full-tabs-links .followers")}).initialize(),Dribbble.Overlay=function(e){return e=e||$("#overlay"),{$el:e,init:function(){e.find(".close").live("click",this.hide.bind(this)),e.find("form .cancel").live("click",this.hide.bind(this)),e.live("click",function(e){$(e.target).is("#overlay")&&this.hide()}.bind(this))},listenForHotkeys:function(){this.keyListeners=Dribbble.Hotkeys.map("overlay",{ESCAPE:this.hide.bind(this)})},stopListeningForHotkeys:function(){this.keyListeners.off()},show:function(){return this.listenForHotkeys(),e.css("height","100%"),e.fadeIn(),!1},hide:function(){return this.stopListeningForHotkeys(),e.fadeOut(function(){this.onHide&&this.onHide()}.bind(this)),!1}}},function(){function e(i){var r=i.target;if(-1!=["html","body","a"].indexOf(r.localName)&&!(i.ctrlKey||i.altKey||i.shiftKey||i.metaKey)){var a=i.which;if(a==t||a==n){var o=a==t?".previous_page":".next_page",s=$.trim($(".pagination:last").find(o).attr("href"));s&&($(document).unbind("keyup",e),document.location=s)}}}var t=37,n=39;$(document).keyup(e)}(),$("a[data-url]").each(function(){var e=$(this),t=e.data("url"),n=e.attr("href");e.data("url",n).attr("href",t)}).click(function(){var e=$(this);e.attr("href",e.data("url"))}),$(".psst .close").click(function(){var e=$(this),t=e.next(),n=t.next();$.post(t.data("url")),0==n.length?$(".psst").slideUp():t.fadeOut(function(){t.remove(),n.fadeIn()})}),Dribbble.Shots={data:{},add:function(e){$(e).each(function(e,t){this.data[t.id]=t}.bind(this))},update:function(e,t){var n=this.data[e];if(n){for(var i in t)n[i]=t[i];n.liker&&n.liker.render()}},idFromShotDiv:function(e){return e[0].id.split("-")[1]},logView:function(e){Dribbble.ShotViewRecorder.queueView(e),this.logAnalyticsView(e)},logViewForShotInDiv:function(e){this.logView(this.idFromShotDiv(e))},logAnalyticsView:function(e){for(var t=this.data[e],n=0;n<t.ga.length;n++){var i=t.ga[n];Dribbble.Analytics.logPageView(i[1],i[0],t.path,t.title)}}},Dribbble.TeaserStats={init:function(e){var t=$("#main ol.dribbbles>li");$(e).each(function(e,t){var n=$("ol.dribbbles li#screenshot-"+t.id);t.rebounds_count>0?n.find(".has-rebounds").html(numberWithDelimiter(t.rebounds_count)).closest("a").show():t.is_rebound&&n.find(".is-rebound").closest("a").show(),t.attachments_count>0&&n.find(".attachments-mark").show(),t.liked_by_html&&n.find(".dribbble-img").append(t.liked_by_html).find("em").hide(),n.find("li.views span").html(numberWithDelimiter(t.view_count)),n.find("li.cmnt").each(function(){var e=$(this);e.find("span").html(numberWithDelimiter(t.comments_count)).tipsy(tipsyOptions),t.commented_on&&e.addClass("current-user-cmnt"),t.comments_since_last_view&&e.addClass("comments-since").find("span").attr("rel","tipsy").attr("title","New comments since last view.")}),n.find(".timestamp").html(t.created_at),t.liker=new Dribbble.ShotLiker(t,n),t.liker.render()}),t.find("ul.tools").css({visibility:"visible"})}},Dribbble.ShotLiker=function(e,t){var n,i=!1;return{initialized:!1,init:function(){if(!this.initialized){if(n=t.find("li.fav"),User.loggedIn()){var e=function(e){return $(e.target).tipsy("hide"),this.toggle(),!1}.bind(this);$("<a href='#' class='toggle-fav'> </a>").insertBefore(n.find("a")).on("click",e),n.find("a").tipsy(tipsyOptions)}this.initialized=!0}},render:function(){this.init();var t=n.find("a:last");t.html(numberWithDelimiter(e.likes_count)),n.toggleClass("marked",e.liked)},toggle:function(){i||(Dribbble.Shots.logAnalyticsView(e.id),i=!0,this.toggleLikeState(),this.render(),this.persistState())},toggleLikeState:function(){Dribbble.Shots.update(e.id,{liked:!e.liked,likes_count:e.likes_count+(e.liked?-1:1)})},persistState:function(){var t={type:"POST",data:{screenshot_id:e.id},complete:function(){i=!1},error:function(){this.toggleLikeState(),this.render()}.bind(this)},n=e.liked;t.url=n?SHOT_LIKE_ADD_PATH:SHOT_LIKE_REMOVE_PATH,$.ajax(t)}}},"undefined"!=typeof newShots&&(Dribbble.Shots.add(newShots),Dribbble.TeaserStats.init(newShots));var Dribbble=Dribbble||{};Dribbble.DeckAd={enabled:!1,enable:function(){this.enabled=!0},load:function(){if(this.enabled){var e=$(".ad.thedeck.target.notloaded");if(e.length){var t="DB",n="https://connect.decknetwork.net/deck"+t+"_js.php?"+(new Date).getTime(),i=document.write;$.ajax({url:n,dataType:"script",beforeSend:function(){document.write=function(t){e.append(t),e.removeClass("notloaded")}},complete:function(){document.write=i}})}}},unload:function(){$(".secondary .ad.thedeck.target").addClass("notloaded").empty()},shuffle:function(){this.enabled&&(this.unload(),this.load())}},Dribbble.Hotkeys={listeners:{},KEY_ALIASES:{LEFT:37,RIGHT:39,ESCAPE:27},initialize:function(){this.bindKeys()},bindKeys:function(){$(document).keyup(function(e){if(!this.isFormField(e.target.tagName)&&!this.isModifierKey(e)){var t=this.keyName(e.which);this.keyName&&this.trigger(t)}}.bind(this))},isFormField:function(e){return"INPUT"==e||"TEXTAREA"==e},isModifierKey:function(e){return e.ctrlKey||e.altKey||e.shiftKey||e.metaKey},keyName:function(e){var t=Dribbble.Hotkeys.KEY_ALIASES;for(var n in t)if(t[n]===e)return n;return String.fromCharCode(e)},enableKeyboardSubmit:function(e){e.on("keydown",function(t){(t.metaKey||t.ctrlKey)&&13==t.keyCode&&(t.preventDefault(),e.closest("form").submit())}),$(".keyboard-submit-shortcut").text(this.displayKeyboardSubmitShortcut())},displayKeyboardSubmitShortcut:function(){return navigator.userAgent.match(/Macintosh/)?"\u2318+enter":"ctrl+enter"},map:function(e,t,n){return this.listeners[e]&&this.listeners[e].off(),this.listeners[e]=t,this.listeners[e].isApplicable=n||function(){return!0},this.listeners[e].off=function(){delete this.listeners[e]}.bind(this),this.listeners[e]},trigger:function(e){for(var t in this.listeners){var n=this.listeners[t];n[e]&&n.isApplicable()&&n[e]()}}},Dribbble.Hotkeys.initialize(),window.history&&"pushState"in window.history&&History.Adapter.bind(window,"statechange",function(){var e=document.location.pathname;$(".attachment-overlay").is(":visible")?e.match(/\/attachments\//)?Dribbble.Attachments.showOverlay(document.location.toString()):Dribbble.Attachments.hideOverlay():e.match(/\/attachments\//)?"undefined"!=typeof Dribbble&&Dribbble.Attachments?Dribbble.Attachments.showOverlay(document.location.toString()):window.location.reload(!0):$("#viewer").length?window.location.reload(!0):$(".shot-overlay").length&&$(".dribbbles").length?e.match(/\/shots\/\d+/)&&!e.match(/\/rebounds/)?Dribbble.Screenshots.showOverlay(document.location.toString()):Dribbble.Screenshots.hideOverlay():($(document).scrollTop(0),window.location.reload(!0))}),Dribbble.ShotViewRecorder={seenShotIds:[],recordedIds:[],recordingDelay:3e3,recordingMaxQueueDepth:10,recordingTimeoutId:null,submitting:!1,queueView:function(e){-1==this.seenShotIds.indexOf(e)&&this.seenShotIds.push(e),this.queueRecordViewedShots()},queueRecordViewedShots:function(){clearTimeout(this.recordingTimeoutId);var e=this.recordingDelay;this.seenShotIds.length-this.recordedIds.length>=this.recordingMaxQueueDepth&&(e=0),this.recordingTimeoutId=setTimeout(function(){this.submitting?this.queueRecordViewedShots():this.recordViewedShots()}.bind(this),e)},recordViewedShots:function(){this.submitting=!0;var e=$(this.seenShotIds).not(this.recordedIds).get();if(e.length>0){var t=$.post("/shots/log_views",{ids:e});t.done(function(){this.recordedIds=this.recordedIds.concat(e)}.bind(this)),t.always(function(){this.submitting=!1}.bind(this))}else this.submitting=!1}},Dribbble.Analytics={existingProperties:[],sentEvents:[],reset:function(){this.existingProperties=[],this.sentEvents=[]},logPageView:function(e,t,n,i){this.log(e,t,"pageview",{page:n,title:i})},log:function(e,t,n,i){this._createProperty(e,t),this._sendEvent(t,n,i)},_createProperty:function(e,t){-1==this.existingProperties.indexOf(e)&&(ga("create",e,"auto",{name:t}),this.existingProperties.push(e))},_sendEvent:function(e,t,n){n=n||{};var i=[e,t,$.param(n)].join("|");-1==this.sentEvents.indexOf(i)&&(ga(e+".send",t,n),this.sentEvents.push(i))}},Dribbble.AnimatedGifSwap={animatedUrl:function(e){return e.replace(/(.*)_(1x|still_2x|still|teaser)(.*?)$/,"$1$3")},attach:function(e){$(document).on({mouseenter:function(e){var t=this.swapperFor($(e.target));t.activate()}.bind(this),mouseleave:function(e){var t=this.swapperFor($(e.target));t.deactivate()}.bind(this)},e)},swapperFor:function(e){return e.data("gif-swapper")||e.data("gif-swapper",new Dribbble.AnimatedGifSwap.Swapper(e.parents("li"))),e.data("gif-swapper")}},Dribbble.AnimatedGifSwap.LoadingIndicator=function(e){var t=[14,28,42,56],n=t.length+1,i=!1;return{activate:function(){i=!0,this.show(),this.progress()},deactivate:function(){i=!1,e.css("background-position-y",0)},hide:function(){e.hide()},progress:function(){i&&(n>0?n-=1:n=t.length,e.css("background-position-y",t[n]+"px"),setTimeout(this.progress.bind(this),250))},show:function(){e.show()}}},Dribbble.AnimatedGifSwap.Swapper=function(e){var t=e.find(".dribbble-shot img"),n=t.attr("src"),i=Dribbble.AnimatedGifSwap.animatedUrl(n),r=new Dribbble.AnimatedGifSwap.LoadingIndicator(e.find(".gif-indicator"));return{$shot:e,$image:t,loaded:!1,hovering:!1,activate:function(){this.hovering=!0,this.swapImage()},deactivate:function(){this.hovering=!1,this.restoreImage(),r.deactivate(),r.show()},loadImageInBackground:function(e,t){var n=new Image;n.onload=function(){this.loaded=!0,t()}.bind(this),n.src=e},restoreImage:function(){t.attr("src",n)},swapImage:function(){this.loaded?(t.attr("src",i),Dribbble.Shots.logViewForShotInDiv(e),r.deactivate(),r.hide()):(r.activate(),this.loadImageInBackground(i,function(){this.hovering&&this.swapImage()}.bind(this)))}}},Dribbble.AnimatedGifSwap.attach(".gif-target"),Dribbble.HoverCards={delay:700,pendingDisplayId:null,tooCloseToTop:350,cache:{},displayedURL:null,dismissed:!1,cardBoundaries:null,wrapper:null,initialize:function(e){this.scopeSelector=e,this.bindEventListeners()},bindEventListeners:function(){$(this.scopeSelector).on("mouseenter.hovercard","a.hoverable",this.mouseenter.bind(this))},findCard:function(){var e=$(".hover-card");return e.length>0?e:($("body").prepend('<div class="hover-card"></div>'),new Dribbble.FollowButton($(".hover-card"),function(e){return e.parent().find(".followers")}).initialize(),this.findCard())},mouseenter:function(e){var t=$(e.currentTarget),n=t.attr("href")+"/hover_card",i=this.displayedURL!=n;if(i)this.dismiss();else if(!this.dismissed)return!1;this.dismissed=!1;var r=+new Date,a=this.findCard();return this.wrapper=t.closest(".hover-card-parent"),0==this.wrapper.length&&(this.wrapper=t.parent()),this.cache[n]?(i&&a.html(this.cache[n]),this.delayedShow(a,r)):$.get(n,function(e){this.dismissed||(a.html(e).find("[rel=tipsy]").removeAttr("rel"),this.cache[n]=a.html(),this.delayedShow(a,r))
}.bind(this)),this.displayedURL=n,!1},dismiss:function(){this.dismissed=!0,clearTimeout(this.pendingDisplayId),this.cardBoundaries=null,$(this.scopeSelector).off("mousemove.hovercard"),this.findCard().hide()},delayedShow:function(e,t){var n=this.delay-(+new Date-t);this.triggerBoundaries=this.getBoundariesForElement(this.wrapper);var i=this.triggerBoundaries.left+e.outerWidth(),r=this.wrapper[0].getBoundingClientRect().top;e.toggleClass("center",i>document.documentElement.clientWidth),e.toggleClass("top",r<this.tooCloseToTop);var a={left:this.triggerBoundaries.left,bottom:"",top:""};r<this.tooCloseToTop?a.top=this.triggerBoundaries.top+this.wrapper.outerHeight():a.bottom=$(window).height()-this.triggerBoundaries.top,e.css(a),this.addHandlerForDismissal(),clearTimeout(this.pendingDisplayId),this.pendingDisplayId=setTimeout(function(){e.show(),this.cardBoundaries=this.getBoundariesForElement(e),r<this.tooCloseToTop?this.cardBoundaries.top-=this.wrapper.outerHeight():this.cardBoundaries.bottom+=this.wrapper.outerHeight(),picturefill()}.bind(this),n)},checkShouldDismissOnMouseMove:function(e){this.mouseIn(e,this.cardBoundaries)||this.wrapper.is(":hover")||this.dismiss()},getBoundariesForElement:function(e){var t=e.offset();return t.right=e.outerWidth()+t.left,t.bottom=e.outerHeight()+t.top,t},mouseIn:function(e,t){return null!=t&&e.pageX>=t.left&&e.pageX<=t.right&&e.pageY>=t.top&&e.pageY<=t.bottom},addHandlerForDismissal:function(){this.removeHandlerForDismissal(),$(this.scopeSelector).on("mousemove.hovercard",this.checkShouldDismissOnMouseMove.bind(this))},removeHandlerForDismissal:function(){$(this.scopeSelector).off("mousemove.hovercard")}},Dribbble.isMobile()||Dribbble.HoverCards.initialize("body"),window.picturefill();